{% extends 'base.html' %}
{% block title %}Home{% endblock %}
{% block content %}

<!-- HERO -->
<section class="hero-section position-relative overflow-hidden">
  <div class="hero-bg"></div>
  <div class="container position-relative py-5">
    <div class="row align-items-center min-vh-50 py-4">
      <div class="col-lg-6">
        <span class="badge bg-success-subtle text-success px-3 py-2 rounded-pill mb-3 fs-6">ğŸŒ± Fresh from Philippine Farms</span>
        <h1 class="display-4 fw-bold mb-3">
          Farm-Fresh Produce,<br/><span class="text-success">Direct to Your Door</span>
        </h1>
        <p class="lead text-muted mb-4">Connect with local Filipino farmers. Buy fresh, support local, eat healthy.</p>
        <div class="d-flex flex-wrap gap-3">
          <a href="{{ url_for('products.list_products') }}" class="btn btn-success btn-lg px-4 shadow">
            <i class="fas fa-shopping-basket me-2"></i>Shop Now
          </a>
          <a href="{{ url_for('auth.register') }}" class="btn btn-outline-success btn-lg px-4">
            <i class="fas fa-seedling me-2"></i>Sell as Farmer
          </a>
        </div>
        <div class="d-flex gap-4 mt-4">
          <div class="text-center"><div class="fw-bold text-success fs-5">500+</div><small class="text-muted">Farmers</small></div>
          <div class="text-center"><div class="fw-bold text-success fs-5">2000+</div><small class="text-muted">Products</small></div>
          <div class="text-center"><div class="fw-bold text-success fs-5">10k+</div><small class="text-muted">Happy Buyers</small></div>
        </div>
      </div>
      <div class="col-lg-6 d-none d-lg-block text-center">
        <div class="hero-illustration">ğŸ¥¬ğŸ…ğŸŒ½ğŸ¥•ğŸğŸ¥¦</div>
      </div>
    </div>
  </div>
</section>

<!-- MOBILE SEARCH -->
<div class="container d-lg-none my-3">
  <form action="{{ url_for('search.search') }}" method="GET">
    <div class="input-group shadow-sm">
      <input type="text" class="form-control" name="q" placeholder="Search products or farmers..."/>
      <button class="btn btn-success" type="submit"><i class="fas fa-search"></i></button>
    </div>
  </form>
</div>

<!-- CATEGORIES -->
<section class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">Browse Categories</h2>
    <a href="{{ url_for('products.list_products') }}" class="btn btn-outline-success btn-sm">View All</a>
  </div>
  <div class="row g-3">
    {% for cat in categories %}
    <div class="col-6 col-md-4 col-lg-2">
      <a href="{{ url_for('products.list_products') }}?category={{ cat.id }}" class="category-card text-decoration-none">
        <div class="card text-center border-0 shadow-sm h-100 category-hover">
          <div class="card-body py-3">
            <div class="category-icon">{{ cat.icon }}</div>
            <div class="fw-semibold text-dark small mt-2">{{ cat.name }}</div>
            <div class="text-muted" style="font-size:0.7rem">{{ cat.name_tl }}</div>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</section>

<!-- FEATURED PRODUCTS -->
<section class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">ğŸ”¥ Featured Products</h2>
    <a href="{{ url_for('products.list_products') }}" class="btn btn-outline-success btn-sm">View All</a>
  </div>
  <div class="row g-3">
    {% for product in featured %}
    <div class="col-6 col-md-4 col-lg-3">
      {% include 'products/_card.html' %}
    </div>
    {% else %}
    <div class="col-12 text-center py-5 text-muted">
      <i class="fas fa-seedling fa-3x mb-3 text-success"></i>
      <p>No products yet. <a href="{{ url_for('auth.register') }}">Be the first farmer to list!</a></p>
    </div>
    {% endfor %}
  </div>
</section>

<!-- WHY HARVEST IQ -->
<section class="bg-light py-5 my-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-5">Why Choose Harvest IQ?</h2>
    <div class="row g-4 text-center">
      <div class="col-md-3">
        <div class="p-3"><div class="feature-icon mb-3">ğŸŒ¿</div><h5>100% Fresh</h5><p class="text-muted small">Sourced directly from farms, no middlemen.</p></div>
      </div>
      <div class="col-md-3">
        <div class="p-3"><div class="feature-icon mb-3">ğŸ’°</div><h5>Fair Prices</h5><p class="text-muted small">Farmers set their own prices. Fair for everyone.</p></div>
      </div>
      <div class="col-md-3">
        <div class="p-3"><div class="feature-icon mb-3">ğŸšš</div><h5>Fast Delivery</h5><p class="text-muted small">From farm to your table in 1-3 days.</p></div>
      </div>
      <div class="col-md-3">
        <div class="p-3"><div class="feature-icon mb-3">ğŸ›¡ï¸</div><h5>Secure Payment</h5><p class="text-muted small">COD, GCash, Maya, and more.</p></div>
      </div>
    </div>
  </div>
</section>

<!-- TOP FARMERS -->
{% if top_farmers %}
<section class="container my-5">
  <h2 class="fw-bold mb-4">Meet Our Farmers</h2>
  <div class="row g-3">
    {% for farmer in top_farmers %}
    <div class="col-6 col-md-4 col-lg-2">
      <a href="{{ url_for('users.farmer_store', farmer_id=farmer.id) }}" class="text-decoration-none">
        <div class="card border-0 shadow-sm text-center farmer-card">
          <div class="card-body py-3">
            <img src="https://ui-avatars.com/api/?name={{ farmer.full_name or farmer.username }}&background=2e7d32&color=fff&size=60"
                 class="rounded-circle mb-2" width="60" height="60" alt="{{ farmer.username }}"/>
            <div class="fw-semibold text-dark small">{{ farmer.full_name or farmer.username }}</div>
            <div class="text-muted" style="font-size:0.7rem">{{ farmer.region or 'Philippines' }}</div>
            <div class="text-warning small mt-1">
              {% for _ in range(farmer.average_rating | int) %}â­{% endfor %}
              <span class="text-muted">({{ farmer.average_rating }})</span>
            </div>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}

{% endblock %}
